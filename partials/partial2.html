<h2>Add Organisation Unit</h2>

<div class="container" ng-show="!parentSet">
<p>Choose parent
<button id="previousButton" class="btn btn-sm" ng-click="getSingleOrgUnit(newOrgUnit.parent.parent.id)" ng-disabled="!newOrgUnit.parent.level == 1 || !newOrgUnit.parent" type="submit">Previous level</button>
<button ng-click="setParent(newOrgUnit.parent)" class="btn btn-sm">Done</button>
<a href="#/view1"><button id="cancelButton" class="btn btn-sm" type="submit">Cancel</button></a>
</p>


<p>
	<b>Currently chosen: </b>
	<b ng-show="newOrgUnit.parent"> {{newOrgUnit.parent.name}}</b>
	<b ng-show="!newOrgUnit.parent"> None</b>
</p>

<table id="parentTable">
  	<tr ng-repeat="x in newOrgUnit.parent.children" ng-click="getSingleOrgUnit(x.id)">
  		
    	<td style="cursor:pointer">{{ x.name }}</td>
  	</tr>
</table>

<b ng-if="newOrgUnit.parent.level == 4">No children</b>



</div>


<div class="container"  ng-show="parentSet">
<b>Chosen parent: {{newOrgUnit.parent.name}}</b>
 <button ng-click="resetParent()" class="btn btn-sm">Change</button>   
 <a href="#/view1"><button id="cancelButton" class="btn btn-sm" type="submit">Cancel</button></a>
<br></br>

<form name="addUnitForm" novalidate class="form-inline" ng-submit="submitForm(addUnitForm.$valid)" style="width:50%;float:left">
    <div class="form-group">
    	<b>Name:</b><b style="color:red">*</b> <input type="text" pattern="[a-z0-9. -]+" class="form-control" ng-model="newOrgUnit.name" required/>
    </div> 
    <div class="form-group">
    	<b>Shortname:</b><b style="color:red">*</b> <input type="text" class="form-control" ng-model="newOrgUnit.shortName" required />
    </div>
    <br /><br />
    
    <div class="form-group">
		<b>Unit code:</b> <input type="text" class="form-control" ng-model="newOrgUnit.unitCode"/>
	</div>
	 <div class="form-group">
    	<b>Parent:</b> <input type="text" class="form-control" ng-model="newOrgUnit.parent.name" readonly />
    </div>
    
    <br /><br />
    
     <div class="form-group">
          <label for="UnitTypeSelector">Unit type:</label>
          <select class="form-control" id="UnitTypeSelector">
            <option>Placeholder1</option>
            <option>Placeholder2</option>
            <option>Placeholder3</option>
            <option>Placeholder4</option>
          </select>
     </div>
	
	</br /><br />
				
	<div class="form-group">
		<b>Opening date:</b><b style="color:red">*</b> <input type="text" class="form-control" ng-model="newOrgUnit.openingDate" required/>
	</div>			
	</br /><br />
	
    
    <div class="form-group">
    	<b>Coordinates</b></br />
    		
 	 	<div class="form-group">
 	 		Latitude: <input type="number" class="form-control" ng-model="newOrgUnit.latitude" />
 	 	</div>
 	 	<div class="form-group">
 	 		Longitude: <input type="number" class="form-control" ng-model="newOrgUnit.longitude" />
 	 	</div>
 	 	
 	 	<br></br>
 	 	
 	 	<button type="submit" class="btn btn-sm" ng-click="getLocation()" >Get location from browser</button>
 		<button type="submit" class="btn btn-sm" ng-click="showMap()" ng-if="!mapShow">Open map</button>

 		</div>
  	<br></br>
   	
  	<div class="form-group">
	  	<b>Active:</b> <input type="radio" ng-model="newOrgUnit.active" value="true" />yes
    	<input type="radio" ng-model="newOrgUnit.active" value="false" />no<br />
   	</div>
           
    <br></br>
    
    <button ng-click="resetForm()" class="btn btn-danger">RESET</button>
    
    <button type ="submit" ng-click="saveOrgUnit(newOrgUnit)" class="btn btn-success" ng-disabled="addUnitForm.$invalid">SAVE</button>
  	<p ng-if="addUnitForm.$invalid" style="color:red">You have to fill in all required fields</p>
  </form>
  
  <div id='map-canvas-save'></div>
  
</div>




<!-- <p>This view allows you to test the user settings.
    This is like an HTTP-based database for your Javascript.
    There are system-wide and user settings. </p>
<p>Your saved setting is: {{earlierSetting}} (click 'Refresh' below to fetch from server).</p>
<p>
    <input ng-model="userSetting.value" type="text" placeholder="Data to save" class="form-control">

</p>
<p>
    <button ng-click="saveSetting()" type="submit" class="btn btn-success">Save setting</button>
    <button ng-click="refreshSetting()" type="submit" class="btn btn-success">Refresh</button>
</p>

 -->
